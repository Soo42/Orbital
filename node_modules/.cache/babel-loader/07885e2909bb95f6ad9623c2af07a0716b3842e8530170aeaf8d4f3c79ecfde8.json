{"ast":null,"code":"var _jsxFileName = \"/Users/sjy/Downloads/Orbital-main-2/src/components/chat/Message.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from \"../../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MessageInput() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const navigate = useNavigate();\n  const sendMessage = async () => {\n    var _user$user_metadata, _user$user_metadata2, _user$user_metadata3;\n    if (!input.trim()) return;\n    const {\n      data: {\n        user\n      }\n    } = await supabase.auth.getUser();\n    if (!user) {\n      alert(\"Please log in.\");\n      setTimeout(() => {\n        navigate(\"/login\");\n      }, 2000);\n      return;\n    }\n    const userMsg = {\n      id: messages.length + 1,\n      sender: ((_user$user_metadata = user.user_metadata) === null || _user$user_metadata === void 0 ? void 0 : _user$user_metadata.username) || \"user\",\n      content: input.trim()\n    };\n    setMessages(prev => [...prev, userMsg]);\n    const {\n      error\n    } = await supabase.from(\"messages\").insert({\n      user_id: user.id,\n      content: userMsg.content,\n      username: ((_user$user_metadata2 = user.user_metadata) === null || _user$user_metadata2 === void 0 ? void 0 : _user$user_metadata2.username) || \"anonymous\",\n      avatar_url: ((_user$user_metadata3 = user.user_metadata) === null || _user$user_metadata3 === void 0 ? void 0 : _user$user_metadata3.avatar_url) || null\n    });\n    if (error) console.error(\"Something went wrong!!!\", error);\n    setTimeout(() => {\n      const botMsg = {\n        id: messages.length + 2,\n        sender: \"other user\",\n        content: `not implemented yet:`\n      };\n      setMessages(prev => [...prev, botMsg]);\n    }, 500);\n    setInput(\"\");\n  };\n  function isPinMessage(id) {\n    return id === 1;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"800px\",\n      margin: \"auto\",\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Chat Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #ccc\",\n        padding: \"10px\",\n        height: \"500px\",\n        overflowY: \"auto\",\n        marginBottom: \"10px\"\n      },\n      children: messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          position: isPinMessage(msg.id) ? \"sticky\" : \"relative\",\n          // justifyContent: msg.sender === \"user\" ? \"flex-end\" : \"flex-start\",\n          backgroundColor: msg.sender === \"user\" ? \"#abcdef\" : \"#f8d7da\",\n          maxWidth: \"60%\",\n          width: \"fit-content\",\n          padding: \"10px\",\n          margin: \"5px 0\",\n          wordBreak: \"break-word\",\n          marginLeft: msg.sender === \"user\" ? \"auto\" : \"0\",\n          // push user messages to right\n          marginRight: msg.sender !== \"user\" ? \"auto\" : \"0\",\n          color: \"black\"\n        },\n        children: msg.content\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && sendMessage(),\n        style: {\n          width: \"80%\",\n          marginRight: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        style: {\n          width: \"20%\"\n        },\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(MessageInput, \"3aJqA+tf1QuB2jFOtx5fGIwAImw=\", false, function () {\n  return [useNavigate];\n});\n_c = MessageInput;\nexport default MessageInput;\nvar _c;\n$RefreshReg$(_c, \"MessageInput\");","map":{"version":3,"names":["React","useState","useNavigate","supabase","jsxDEV","_jsxDEV","MessageInput","_s","messages","setMessages","input","setInput","navigate","sendMessage","_user$user_metadata","_user$user_metadata2","_user$user_metadata3","trim","data","user","auth","getUser","alert","setTimeout","userMsg","id","length","sender","user_metadata","username","content","prev","error","from","insert","user_id","avatar_url","console","botMsg","isPinMessage","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","border","height","overflowY","marginBottom","map","msg","display","position","backgroundColor","width","wordBreak","marginLeft","marginRight","color","type","value","onChange","e","target","onKeyDown","key","onClick","_c","$RefreshReg$"],"sources":["/Users/sjy/Downloads/Orbital-main-2/src/components/chat/Message.tsx"],"sourcesContent":["import React from 'react';\nimport { Message } from '../../types'; \nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from \"../../App\";\n\nfunction MessageInput() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const navigate = useNavigate();\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) {\n      alert(\"Please log in.\");\n      setTimeout(() => {\n        navigate(\"/login\"); \n      }, 2000);\n      return;\n    }\n\n    const userMsg: Message = {\n      id: messages.length + 1,\n      sender: user.user_metadata?.username || \"user\",\n      content: input.trim(),\n    };\n\n    setMessages((prev: Message[]) => [...prev, userMsg]);\n\n    const { error } = await supabase.from(\"messages\").insert({\n      user_id: user.id,\n      content: userMsg.content,\n      username: user.user_metadata?.username || \"anonymous\",\n      avatar_url: user.user_metadata?.avatar_url || null\n    });\n\n    if (error) console.error(\"Something went wrong!!!\", error);\n\n    setTimeout(() => {\n      const botMsg: Message = {\n        id: messages.length + 2,\n        sender: \"other user\",\n        content: `not implemented yet:`,\n      };\n\n    setMessages((prev: Message[]) => [...prev, botMsg]);\n    }, 500);\n\n    setInput(\"\");\n  };\n\n\n    function isPinMessage(id: number) {\n        return id === 1;\n    }\n  return (\n    <div style={{ maxWidth: \"800px\", margin: \"auto\", padding: \"20px\" }}>\n        <h2>Chat Messages</h2>\n        <div\n            style={{\n                border: \"1px solid #ccc\",\n                padding: \"10px\",\n                height: \"500px\",\n                overflowY: \"auto\",\n                marginBottom: \"10px\",\n            }}\n        >\n        {messages.map((msg) => (\n            <div\n                key={msg.id}\n                style={{\n                    display: \"flex\",\n                    position: isPinMessage(msg.id) ? \"sticky\" : \"relative\",\n                    // justifyContent: msg.sender === \"user\" ? \"flex-end\" : \"flex-start\",\n                    backgroundColor: msg.sender === \"user\" ? \"#abcdef\" : \"#f8d7da\",\n                    maxWidth: \"60%\",\n                    width: \"fit-content\", \n                    padding: \"10px\",\n                    margin: \"5px 0\",\n                    wordBreak: \"break-word\",\n                    marginLeft: msg.sender === \"user\" ? \"auto\" : \"0\", // push user messages to right\n                    marginRight: msg.sender !== \"user\" ? \"auto\" : \"0\", \n                    color: \"black\",\n                }}\n            >\n            {msg.content}\n            </div>\n        ))}\n        </div>\n        <div style={{display: \"flex\"}}><input\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && sendMessage()}\n            style={{ width: \"80%\", marginRight: \"10px\" }}/>\n            <button onClick={sendMessage} style={{width: \"20%\"}}>Send</button>\n        </div>\n    </div>\n  );\n}\n\nexport default MessageInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}